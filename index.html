<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplikasi Job Pending</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #fbbf24 0%, #3b82f6 100%);
        }
        
        .logo-circle {
            background: linear-gradient(45deg, #fbbf24, #3b82f6, #8b5cf6, #f59e0b);
            background-size: 300% 300%;
            animation: gradientShift 4s ease infinite;
            border: 4px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.4), 
                        0 0 60px rgba(251, 191, 36, 0.3),
                        inset 0 0 20px rgba(255, 255, 255, 0.2);
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            33% { background-position: 100% 50%; }
            66% { background-position: 50% 100%; }
            100% { background-position: 0% 50%; }
        }
        
        .success-animation {
            animation: successPulse 0.6s ease-out;
        }
        
        @keyframes successPulse {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .thumbs-up {
            animation: thumbsUp 1s ease-in-out;
        }
        
        @keyframes thumbsUp {
            0%, 100% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(-10deg) scale(1.2); }
            75% { transform: rotate(10deg) scale(1.2); }
        }
        
        .wink {
            animation: wink 2s ease-in-out infinite;
        }
        
        @keyframes wink {
            0%, 90%, 100% { transform: scaleY(1); }
            95% { transform: scaleY(0.1); }
        }
        
        .card-shadow {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .input-focus:focus {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3);
        }
        
        .btn-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body class="gradient-bg min-h-screen py-8">
    <div class="container mx-auto px-4 max-w-4xl">
        <!-- Header dengan Logo -->
        <div class="text-center mb-8">
            <div class="logo-circle w-32 h-32 rounded-full mx-auto mb-4 flex items-center justify-center p-1">
                <div class="bg-white rounded-full w-full h-full flex items-center justify-center">
                    <img src="https://iili.io/KWiqdUg.png" alt="Logo" class="w-20 h-20 object-contain">
                </div>
            </div>
            <h1 class="text-4xl font-bold text-white mb-2">Job Pending</h1>
        </div>

        <!-- Form Card -->
        <div class="bg-white rounded-3xl card-shadow p-8 mb-8">
            <form id="pendingForm" class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Tanggal -->
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Tanggal</label>
                        <input type="date" id="tanggal" required 
                               class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none input-focus transition-all duration-300">
                    </div>

                    <!-- Pembuat Pending -->
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Pembuat Pending</label>
                        <input type="text" id="pembuatPending" required placeholder="Nama pembuat pending"
                               class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none input-focus transition-all duration-300">
                    </div>

                    <!-- Penerima Pending -->
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Penerima Pending</label>
                        <input type="text" id="penerimaPending" required placeholder="Nama penerima pending"
                               class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none input-focus transition-all duration-300">
                    </div>

                    <!-- Kelas -->
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Kelas</label>
                        <select id="kelas" required 
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none input-focus transition-all duration-300">
                            <option value="">Pilih Kelas</option>
                            <option value="X DKV">X DKV</option>
                            <option value="X TAB A">X TAB A</option>
                            <option value="X TAB B">X TAB B</option>
                            <option value="XI DKV">XI DKV</option>
                            <option value="XI TAB A">XI TAB A</option>
                            <option value="XI TAB B">XI TAB B</option>
                            <option value="XII DKV">XII DKV</option>
                            <option value="XII TAB A">XII TAB A</option>
                            <option value="XII TAB B">XII TAB B</option>
                        </select>
                    </div>

                    <!-- Mata Pelajaran -->
                    <div class="md:col-span-2">
                        <label class="block text-gray-700 font-semibold mb-2">Mata Pelajaran</label>
                        <input type="text" id="mataPelajaran" required placeholder="Nama mata pelajaran"
                               class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none input-focus transition-all duration-300">
                    </div>

                    <!-- Dari Jam -->
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Dari Jam Ke</label>
                        <select id="dariJam" required 
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none input-focus transition-all duration-300">
                            <option value="">Pilih Jam</option>
                            <option value="1">Jam ke-1</option>
                            <option value="2">Jam ke-2</option>
                            <option value="3">Jam ke-3</option>
                            <option value="4">Jam ke-4</option>
                            <option value="5">Jam ke-5</option>
                            <option value="6">Jam ke-6</option>
                            <option value="7">Jam ke-7</option>
                            <option value="8">Jam ke-8</option>
                            <option value="9">Jam ke-9</option>
                        </select>
                    </div>

                    <!-- Sampai Jam -->
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Sampai Jam Ke</label>
                        <select id="sampaiJam" required 
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none input-focus transition-all duration-300">
                            <option value="">Pilih Jam</option>
                            <option value="1">Jam ke-1</option>
                            <option value="2">Jam ke-2</option>
                            <option value="3">Jam ke-3</option>
                            <option value="4">Jam ke-4</option>
                            <option value="5">Jam ke-5</option>
                            <option value="6">Jam ke-6</option>
                            <option value="7">Jam ke-7</option>
                            <option value="8">Jam ke-8</option>
                            <option value="9">Jam ke-9</option>
                        </select>
                    </div>

                    <!-- Jumlah JP (Auto Calculate) -->
                    <div class="md:col-span-2">
                        <label class="block text-gray-700 font-semibold mb-2">Jumlah JP</label>
                        <div class="relative">
                            <input type="number" id="jumlahJP" readonly 
                                   class="w-full px-6 py-4 border-2 border-gradient-to-r from-yellow-300 to-blue-300 rounded-xl bg-gradient-to-r from-yellow-50 to-blue-50 text-gray-800 font-bold text-xl text-center shadow-inner">
                            <div class="absolute right-4 top-1/2 transform -translate-y-1/2 text-blue-500 font-semibold">
                                JP
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="text-center pt-4">
                    <button type="submit" 
                            class="bg-gradient-to-r from-yellow-400 to-blue-500 text-white font-bold py-4 px-8 rounded-2xl btn-hover transition-all duration-300 text-lg">
                        💾 Simpan Data
                    </button>
                </div>
            </form>
        </div>

        <!-- Success Message Overlay -->
        <div id="successOverlay" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white rounded-3xl card-shadow p-12 text-center success-animation max-w-md mx-4">
                <div class="text-8xl mb-6">
                    <span class="thumbs-up inline-block">👍</span>
                    <span class="wink inline-block ml-4">😉</span>
                </div>
                <h3 class="text-3xl font-bold text-green-600 mb-4">Data Berhasil Disimpan!</h3>
                <p class="text-gray-600 text-lg">Job pending telah ditambahkan ke dalam sistem.</p>
                <div class="mt-6">
                    <button onclick="closeSuccessMessage()" class="bg-gradient-to-r from-green-400 to-blue-500 text-white font-bold py-3 px-6 rounded-xl hover:shadow-lg transition-all duration-300">
                        ✓ OK
                    </button>
                </div>
            </div>
        </div>

        <!-- Copyright -->
        <div class="text-center mt-8">
            <p class="text-white text-sm opacity-80">© 2025 Kurikulum SMK Maharati</p>
        </div>
    </div>

    <!-- Hidden iframe untuk menerima response dari Google Apps Script -->
    <iframe name="hidden_iframe" style="display:none;"></iframe>

    <script>
        // Array untuk menyimpan data (simulasi spreadsheet)
        let pendingData = [];

        // Auto calculate JP
        function calculateJP() {
            const dariJam = parseInt(document.getElementById('dariJam').value);
            const sampaiJam = parseInt(document.getElementById('sampaiJam').value);
            
            if (dariJam && sampaiJam && sampaiJam >= dariJam) {
                const jumlahJP = sampaiJam - dariJam + 1;
                document.getElementById('jumlahJP').value = jumlahJP;
            } else {
                document.getElementById('jumlahJP').value = '';
            }
        }

        // Event listeners untuk auto calculate
        document.getElementById('dariJam').addEventListener('change', calculateJP);
        document.getElementById('sampaiJam').addEventListener('change', calculateJP);

        // Form submission
        document.getElementById('pendingForm').addEventListener('submit', function(e) {
            e.preventDefault();

            // Validasi semua field harus terisi
            const tanggal = document.getElementById('tanggal').value;
            const pembuatPending = document.getElementById('pembuatPending').value;
            const penerimaPending = document.getElementById('penerimaPending').value;
            const kelas = document.getElementById('kelas').value;
            const mataPelajaran = document.getElementById('mataPelajaran').value;
            const dariJam = document.getElementById('dariJam').value;
            const sampaiJam = document.getElementById('sampaiJam').value;
            const jumlahJP = document.getElementById('jumlahJP').value;

            // Cek apakah ada field yang kosong
            if (!tanggal || !pembuatPending || !penerimaPending || !kelas || !mataPelajaran || !dariJam || !sampaiJam || !jumlahJP) {
                showErrorMessage('Semua field harus diisi!');
                return;
            }

            // Validasi jam (sampai jam harus >= dari jam)
            if (parseInt(sampaiJam) < parseInt(dariJam)) {
                showErrorMessage('Jam selesai harus lebih besar atau sama dengan jam mulai!');
                return;
            }

            // Update button status
            const submitButton = document.querySelector('button[type="submit"]');
            submitButton.innerHTML = '⏳ Menyimpan...';
            submitButton.disabled = true;

            // Buat form tersembunyi untuk mengirim data ke Google Apps Script
            const form = document.createElement('form');
            form.method = 'POST';
            form.action = 'https://script.google.com/macros/s/AKfycbzf9cMEhe3Ifnf3vgvHfex2cF-5iwyV8LPZOfWByjuvElBJ5kJBQJEzcjbi4n-7Sl2PWg/exec';
            form.target = 'hidden_iframe';
            form.style.display = 'none';
            
            // Tambahkan data sebagai hidden inputs
            const formData = {
                tanggal: tanggal,
                pembuatPending: pembuatPending,
                penerimaPending: penerimaPending,
                kelas: kelas,
                mataPelajaran: mataPelajaran,
                dariJam: dariJam,
                sampaiJam: sampaiJam,
                jumlahJP: jumlahJP
            };

            Object.keys(formData).forEach(key => {
                const input = document.createElement('input');
                input.type = 'hidden';
                input.name = key;
                input.value = formData[key];
                form.appendChild(input);
            });
            
            // Tambahkan form ke body dan submit
            document.body.appendChild(form);
            form.submit();
            
            // Hapus form setelah submit
            setTimeout(() => {
                document.body.removeChild(form);
            }, 1000);

            // Simpan ke array lokal sebagai backup
            pendingData.push(formData);

            // Reset button setelah 3 detik
            setTimeout(() => {
                submitButton.innerHTML = '💾 Simpan Data';
                submitButton.disabled = false;
                
                // Tampilkan pesan sukses
                document.getElementById('successOverlay').classList.remove('hidden');
                
                // Reset form
                document.getElementById('pendingForm').reset();
                document.getElementById('jumlahJP').value = '';

                // Auto close setelah 4 detik
                setTimeout(() => {
                    closeSuccessMessage();
                }, 4000);
            }, 3000);
        });

        // Function untuk menampilkan pesan error
        function showErrorMessage(message) {
            // Hapus pesan error sebelumnya jika ada
            const existingError = document.getElementById('errorMessage');
            if (existingError) {
                existingError.remove();
            }

            // Buat elemen pesan error
            const errorDiv = document.createElement('div');
            errorDiv.id = 'errorMessage';
            errorDiv.className = 'bg-red-100 border-2 border-red-400 text-red-700 px-6 py-4 rounded-xl mb-4 text-center';
            errorDiv.innerHTML = `
                <div class="flex items-center justify-center">
                    <span class="text-2xl mr-2">⚠️</span>
                    <span class="font-semibold">${message}</span>
                </div>
            `;

            // Tambahkan sebelum form
            const form = document.getElementById('pendingForm');
            form.parentNode.insertBefore(errorDiv, form);

            // Hapus pesan error setelah 5 detik
            setTimeout(() => {
                errorDiv.remove();
            }, 5000);

            // Scroll ke pesan error
            errorDiv.scrollIntoView({ behavior: 'smooth' });
        }

        // Function untuk menutup pesan sukses
        function closeSuccessMessage() {
            document.getElementById('successOverlay').classList.add('hidden');
        }

        // Set tanggal hari ini sebagai default
        document.getElementById('tanggal').value = new Date().toISOString().split('T')[0];
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'989b34b5b03cb5e7',t:'MTc1OTY0OTM0NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
